{% extends "base.html" %}

{% block content %}
<!--Konnex Navigation-->
<div class="navigation" style="position: absolute !important;">
    <div class="toggle"></div>
    <ul>
        <li onclick="call()">
            <a href="javascript:introJs().setOption('showProgress', true).start();">
                <span class="icon"><i class="fa fa-book" aria-hidden="true"></i></span>
                <span class="title">Website Tour</span>
            </a>
        </li>
        <li class="dffloatbutton">
            <a href="#">
                <span class="icon"><i class="fa fa-commenting" aria-hidden="true"></i></span>
                <span class="title ">Support Chatbot</span>
            </a>
        </li>
        <li>
            <a href="#">
                <span class="icon"><i class="fa fa-bug" aria-hidden="true"></i>
                </span>
                <span class="title" onclick="openForm()">Bug Reporting</span>
            </a>
        </li>
        </ul>
</div>




<div class="bg-light">
    <div class="container mt-lg-5 mt-5 pt-5">
        <div class="row align-items-center mb-1 mt-lg-5" align="center">
            <div class="col">
                <h2 class="font-weight-bold" style="color:#212529; text-align: center">
                    Welcome{% if 'logged_in' in session %} {{ name }}{% endif %}!
                </h2>
            </div>
        </div>
        <div class="row mb-4 d-none d-lg-hidden">
            <div class="col">
                <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                    <ol class="carousel-indicators">
                        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                    </ol>
                    <div class="carousel-inner" style="border-radius: 15px">
                        <div class="carousel-item active">
                            <img class="d-block w-100" src="{{ url_for('static',filename='img/SIH - SGRP (3).png') }}"
                                alt="First slide" height="250" style="object-fit: cover ; object-position: top;">
                            <div class="carousel-caption d-none d-md-block">
                                <h1>Welcome to Learn2Secure</h1>
                                <br><br>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img class="d-block w-100"
                                src="{{ url_for('static',filename='img/SIH - SGRP (3) (another copy).png') }}"
                                alt="Second slide" height="250" style="object-fit: cover; object-position: top;">
                            <div class="carousel-caption d-none d-md-block">
                                <h1>Master Cyber Security!</h1>
                                <br>
                                <br>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img class="d-block w-100"
                                src="{{ url_for('static',filename='img/SIH - SGRP (3) (copy).png') }}" alt="Third slide"
                                height="250" style="object-fit: cover; object-position: top;">
                            <div class="carousel-caption d-none d-md-block">
                                <h1>Share your knowledge!</h1>
                                <br>
                                <br>
                            </div>
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
        </div>

        <div style="text-align: center">
            <h5>Select your level and get started. </h5>
        </div>
        <div class="row justify-content-center mb-3">
            <div class="col-lg-4 col-md-4 col-6">
                <a href="/basics">
                    <div class="options" style="cursor: pointer">
                        <div>
                            <img src="{{ url_for('static',filename='img/black.jpg') }}" class="options-img" />
                        </div>
                        <div id="xyz" class="options-title p-2"><span class="fas fa-star"></span><span
                                class="far fa-star"></span><span class="far fa-star"></span><br>
                            Beginner
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-4 col-md-4 col-6">
                <a href="/intermediate">
                    <div class="options" style="cursor: pointer">
                        <div>
                            <img src="{{ url_for('static',filename='img/black.jpg') }}" class="options-img" />
                        </div>
                        <div class="options-title p-2">
                            {#                            {% if not 'logged_in' in session %}#}
                            {#                            <i class="fa fa-lock"></i>#}
                            {#                            <br>#}
                            {#                            {% endif %}#}
                            <span class="fas fa-star"></span><span class="fas fa-star"></span><span
                                class="far fa-star"></span><br>
                            Intermediate
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-4 col-md-4 col-6">
                <a href="/advanced">
                    <div class="options" style="cursor: pointer">
                        <div>
                            <img src="{{ url_for('static',filename='img/black.jpg') }}" class="options-img" />
                        </div>
                        <div class="options-title p-2"><span class="fas fa-star"></span><span
                                class="fas fa-star"></span><span class="fas fa-star"></span><br>
                            Advanced
                        </div>
                    </div>
                </a>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-7 col-12">
                <div class="card-columns" style="column-count: 1">
                </div>
            </div>
        </div>


        <div class="dfchatbot">
            <script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>
            <df-messenger intent="WELCOME" chat-title="konnect" agent-id="98cdbcd5-7649-4b58-bb3a-7bd77ec22971"
                language-code="en"></df-messenger>
            <style>
                df-messenger {
                    --df-messenger-bot-message: #878fac;
                    --df-messenger-button-titlebar-color: #df9b56;
                    --df-messenger-chat-background-color: #fafafa;
                    --df-messenger-font-color: white;
                    --df-messenger-send-icon: #878fac;
                    --df-messenger-user-message: #479b3d;
                }
            </style>
        </div>

        <style>
            .chat-popup {
                display: none;
                position: fixed;
                bottom: 10px;
                right: 800px;
                left: 350px;
                border: 3px solid #f1f1f1;
                z-index: 9;
            }

            /* Add styles to the form container */
            .form-container {
                max-width: 300px;
                padding: 10px;
                background-color: rgb(52, 58, 64);
            }

            .textCol {
                color: white;
            }

            .form-container input {
                width: 100%;
                padding: 15px;
                margin: 5px 0 22px 0;
                border: none;
                background: #f1f1f1;
                resize: none;
            }

            /* Full-width textarea */
            .form-container textarea {
                width: 100%;
                padding: 15px;
                margin: 5px 0 22px 0;
                border: none;
                background: #f1f1f1;
                resize: none;
                min-height: 200px;
            }

            /* When the textarea gets focus, do something */
            .form-container textarea:focus {
                background-color: #ddd;
                outline: none;
            }

            /* Set a style for the submit/send button */
            .form-container {
                padding: 16px 20px;
                border: none;
                cursor: pointer;
                width: 100%;
                margin-bottom: 10px;
                opacity: 1;
            }

            /* Add some hover effects to buttons */
            .form-container .btn:hover,
            .open-button:hover {
                opacity: 1;
            }
        </style>

        <div class="chat-popup" id="myForm">
            <form action="/sendemail" method="POST" class="form-container">
                <h2 class="textCol">Report a bug!</h2>
                <label for="email" class="textCol"><b>E-mail</b></label><br>
                <input type="text" id="email" name="email" required="required" placeholder="E-mail" />
                <label for="msg" class="textCol"><b>Message</b></label>
                <textarea placeholder="Bug description.." name="msg" required></textarea>
                <button type="submit" class="btn btn-outline-success btn-lg">Send</button>
                <button type="button" class="btn btn-outline-danger  btn-lg" onclick="closeForm()">Close</button>
            </form>
        </div>

        <script>
            function openForm() {
                document.getElementById("myForm").style.display = "block";
            }
            function closeForm() {
                document.getElementById("myForm").style.display = "none";
            }
        </script>

        <script>
            $(document).ready(function () {
                window.addEventListener('dfMessengerLoaded', function (event) {
                    $r1 = document.querySelector("df-messenger");
                    $r2 = $r1.shadowRoot.querySelector("df-messenger-chat");
                    $r3 = $r2.shadowRoot.querySelector("df-messenger-user-input"); //for other mods

                    var sheet = new CSSStyleSheet;
                    sheet.replaceSync(`div.chat-wrapper[opened="true"] { height: 400px }`);
                    $r2.shadowRoot.adoptedStyleSheets = [sheet];

                });
            });
        </script>

        <script>
            function call() {
                introJs().setOptions({
                    showProgress: true,
                    steps: [
                        {
                            title: 'Home',
                            element: document.querySelector('#home'),
                            // element: document.querySelector('#xyz'),
                            intro: 'Click here to view the Home.'
                        },
                        {
                            title: 'This is the Login button',
                            element: document.querySelector('#login'),
                            intro: 'You can view all the available pages by clicking on this.'
                        },
                        {
                            title: 'This is the Register',
                            element: document.querySelector('#register'),
                            intro: 'To register click here.'
                        },
                        {
                            title: 'This is table',
                            element: document.querySelector('#table'),
                            intro: 'For viewing the table you can click here.'
                        },
                        {
                            title: 'This is a Search Bar',
                            element: document.querySelector('#search-bar'),
                            intro: 'You can search the data from here.'
                        },
                        {
                            title: 'Alert',
                            element: document.querySelector('#alertsDropdown'),
                            intro: 'Any alert (if any) will be pop here.'
                        },
                        {
                            title: 'Messages',
                            element: document.querySelector('#messagesDropdown'),
                            intro: 'All the latest notification/messages will be updated here.'
                        },
                        {
                            title: 'User Profile',
                            element: document.querySelector('#av'),
                            intro: 'Click here for viewing user profile.'
                        }

                    ]
                }, true).start();
            }

            //hide-show df icon
            var dfchatbot = document.querySelector('.dfchatbot');
            var dffloatbutton = document.querySelector('.dffloatbutton');
            dfchatbot.hidden = true;

            dffloatbutton.addEventListener('click', () => {
                dfchatbot.hidden = false;
            });
        </script>


        <!-- introjs css -->
        <link rel="stylesheet" href="https://unpkg.com/intro.js/minified/introjs.min.css">
        <!-- Add Nazanin template -->
        <link rel="stylesheet" href="https://unpkg.com/intro.js/themes/introjs-nazanin.css">

        <!-- Introjs script -->
        <script src="https://unpkg.com/intro.js/minified/intro.min.js"></script>


        {% endblock %}